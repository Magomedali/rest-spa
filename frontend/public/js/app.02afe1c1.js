(function(t){function e(e){for(var a,o,c=e[0],i=e[1],l=e[2],d=0,p=[];d<c.length;d++)o=c[d],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&p.push(s[o][0]),s[o]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a]);u&&u(e);while(p.length)p.shift()();return n.push.apply(n,l||[]),r()}function r(){for(var t,e=0;e<n.length;e++){for(var r=n[e],a=!0,c=1;c<r.length;c++){var i=r[c];0!==s[i]&&(a=!1)}a&&(n.splice(e--,1),t=o(o.s=r[0]))}return t}var a={},s={app:0},n=[];function o(e){if(a[e])return a[e].exports;var r=a[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=t,o.c=a,o.d=function(t,e,r){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(r,a,function(e){return t[e]}.bind(null,a));return r},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],i=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var u=i;n.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"56d7":function(t,e,r){"use strict";r.r(e);r("cadf"),r("551c"),r("f751"),r("097d");var a=r("2b0e"),s=r("5f5b"),n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("header",{staticClass:"app-header"},[r("Nav")],1),r("div",{staticClass:"app-content"},[r("main",{staticClass:"container"},[r("router-view")],1)]),t._m(0)])},o=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("footer",{staticClass:"app-footer"},[r("div",{staticClass:"container"},[r("hr"),r("p",[t._v("© App. All rights reserved.")])])])}],c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nav",{staticClass:"navbar navbar-expand-sm navbar-dark bg-dark top",attrs:{role:"navigation"}},[a("div",{staticClass:"container"},[a("div",{staticClass:"navbar-header"},[t._m(0),a("router-link",{staticClass:"navbar-brand",attrs:{to:{name:"home"}}},[a("img",{attrs:{src:r("cf05"),alt:"App",height:"28"}})])],1),a("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarCollapse"}},[a("ul",{staticClass:"navbar-nav ml-auto"},[a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",attrs:{to:{name:"home"}}},[t._v("Home")])],1),a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",attrs:{to:{name:"catalog"}}},[t._v("Catalog")])],1)])])])])},i=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarCollapse","aria-controls":"#navbarCollapse","aria-expanded":"false","aria-label":"Toggle navigation"}},[r("span",{staticClass:"navbar-toggler-icon"})])}],l={name:"Nav"},u=l,d=r("2877"),p=Object(d["a"])(u,c,i,!1,null,null,null),h=p.exports,f={components:{Nav:h}},v=f,m=(r("5c0b"),Object(d["a"])(v,n,o,!1,null,null,null)),_=m.exports,b=r("8c4f"),g=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},y=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"home"},[r("h1",[t._v("Welcome to our shop")])])}],C={},$=Object(d["a"])(C,g,y,!1,null,null,null),O=$.exports,w=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"catalog"},[r("div",{staticClass:"catalog-header"},[r("h1",[t._v("Catalog")]),r("button",{staticClass:"btn btn-sm btn-success",on:{click:t.generate}},[t._v("Generate")]),t._v("  \n\t    "),t.btnHidden?t._e():r("button",{staticClass:"btn btn-sm btn-success",on:{click:t.createOrder}},[t._v("Create order")])]),t.error?r("b-alert",{attrs:{variant:"danger",show:""}},[t._v(t._s(t.error))]):t._e(),t.success?r("b-alert",{attrs:{variant:"success",show:""}},[t._v(t._s(t.success))]):t._e(),t.products.length?r("div",{staticClass:"products"},[r("table",{staticClass:"table table-sm table-bordered table-collapsed"},[t._m(0),r("tbody",t._l(t.products,(function(e){return r("tr",{staticClass:"product-item"},[r("td",[t._v(t._s(e.id))]),r("td",[t._v(t._s(e.name))]),r("td",[t._v(t._s(e.price))]),r("td",[r("input",{directives:[{name:"model",rawName:"v-model",value:t.order.products,expression:"order.products"}],attrs:{type:"checkbox"},domProps:{value:e,checked:Array.isArray(t.order.products)?t._i(t.order.products,e)>-1:t.order.products},on:{change:[function(r){var a=t.order.products,s=r.target,n=!!s.checked;if(Array.isArray(a)){var o=e,c=t._i(a,o);s.checked?c<0&&t.$set(t.order,"products",a.concat([o])):c>-1&&t.$set(t.order,"products",a.slice(0,c).concat(a.slice(c+1)))}else t.$set(t.order,"products",n)},t.updateMessage]}})])])})),0)])]):t._e()],1)},k=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("thead",[r("tr",[r("th",[t._v("#")]),r("th",[t._v("Name")]),r("th",[t._v("Price")]),r("th")])])}],x=(r("ac6a"),r("bc3a")),P=r.n(x),j={data:function(){return{success:null,error:null,products:[],btnHidden:!0,order:{id:0,products:[]}}},mounted:function(){this.loadProducts()},methods:{updateMessage:function(){this.btnHidden=!this.order.products.length},generate:function(){var t=this;P.a.put("/product").then((function(e){e.data.hasOwnProperty("success")&&e.data.success&&(t.success=e.data.success,t.loadProducts())})).catch((function(e){e.response?e.response.data.error&&(t.error=e.response.data.error):console.log(e.message)}))},loadProducts:function(){var t=this;P.a.get("/product").then((function(e){t.products=e.data}))},createOrder:function(){var t=this,e=[];this.order.products.length&&(this.order.products.forEach((function(t){e.push(t.id)})),P.a.put("/order",e).then((function(e){e.data.hasOwnProperty("id")?(t.success="Order #"+e.data.id+" created successfully",t.order.id=e.data.id,t.$store.state.order=t.order,t.$store.state.notification=t.success,t.$router.push({name:"payment"})):t.error="Error while creating order"})).catch((function(e){e.response?e.response.data.error&&(t.error=e.response.data.error):console.log(e.message)})))}}},E=j,A=Object(d["a"])(E,w,k,!1,null,null,null),N=A.exports,S=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"payment"},[r("h1",[t._v("Your order #"+t._s(t.order.id))]),r("button",{staticClass:"btn btn-sm btn-success",on:{click:t.payment}},[t._v("Execute Pay, Sum: "+t._s(t.sum))]),t.error?r("b-alert",{attrs:{variant:"danger",show:""}},[t._v(t._s(t.error))]):t._e(),t.success?r("b-alert",{attrs:{variant:"success",show:""}},[t._v(t._s(t.success))]):t._e(),t.order.products.length?r("div",{staticClass:"products"},[r("table",{staticClass:"table table-sm table-bordered table-collapsed"},[t._m(0),r("tbody",t._l(t.order.products,(function(e){return r("tr",{staticClass:"product-item"},[r("td",[t._v(t._s(e.id))]),r("td",[t._v(t._s(e.name))]),r("td",[t._v(t._s(e.price))])])})),0)])]):t._e()],1)},M=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("thead",[r("tr",[r("th",[t._v("#")]),r("th",[t._v("Name")]),r("th",[t._v("Price")])])])}],T={data:function(){return{error:null,success:this.$store.state.notification,sum:null,order:this.$store.state.order}},mounted:function(){this.$store.state.order.products.length||this.$router.push({name:"catalog"});var t=null;this.$store.state.order.products.forEach((function(e){t+=parseInt(e.price)})),this.sum=t},methods:{payment:function(){var t=this;this.error=null,this.success=null,P.a.post("/pay",{id:this.order.id,sum:this.sum}).then((function(e){e.data.hasOwnProperty("success")&&e.data.success&&(t.$store.state.notification="Thanks for order",t.$router.push({name:"success"}))})).catch((function(e){console.log(e),e.response?e.response.data.error&&(t.error=e.response.data.error):console.log(e.message)}))}}},H=T,B=Object(d["a"])(H,S,M,!1,null,null,null),J=B.exports,z=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"success"},[r("h1",[t._v(t._s(t.msg))]),r("router-link",{attrs:{to:{name:"catalog"}}},[t._v("Back to catalog")])],1)},G=[],I={data:function(){return{msg:this.$store.state.notification}},mounted:function(){this.$store.state.order.products.length||this.$router.push({name:"catalog"}),this.$store.commit("clearOrder")},methods:{}},L=I,R=Object(d["a"])(L,z,G,!1,null,null,null),U=R.exports;a["default"].use(b["a"]);var W=new b["a"]({mode:"history",base:"/",routes:[{path:"/",name:"home",component:O},{path:"/catalog",name:"catalog",component:N},{path:"/payment",name:"payment",component:J},{path:"/success",name:"success",component:U}]}),Y=r("2f62");a["default"].use(Y["a"]);var q=new Y["a"].Store({state:{order:{id:null,products:[]},notification:null},getters:{},mutations:{setNotification:function(t,e){t.notification=e},setOrder:function(t,e){t.order=e},clearOrder:function(t,e){t.order.id=null,t.order.products=[]}},actions:{}});a["default"].config.productionTip=!1,P.a.defaults.baseURL="http://127.0.0.1:8008";var D=btoa("admin:1");P.a.defaults.headers.common["Authorization"]="Basic "+D,a["default"].use(s["a"]),new a["default"]({router:W,store:q,render:function(t){return t(_)}}).$mount("#app")},"5c0b":function(t,e,r){"use strict";var a=r("e332"),s=r.n(a);s.a},cf05:function(t,e,r){t.exports=r.p+"img/logo.82b9c7a5.png"},e332:function(t,e,r){}});
//# sourceMappingURL=app.02afe1c1.js.map